<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Pond</title>
  <style>      
 body, html {
      width: 100%;
      margin: 0;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      background-size: cover;
      background-repeat: repeat;
      background-position: center;
      place-items: center; 
    }
      
 canvas, html {
   
    } 
/* Mining pools, algae and floods, from the artificial broth a digital life is born.
Aerial perspective isn’t tactical, invaders are no longer the enemy, guns do not kill anymore. */

 /* made by fric and lunasquare, so basically made with love 
ˆˆ³ˆ•ti³³••xÿûûxxûxxxxn•³³³ˆ³i³ˆˆˆˆ ˆˆˆˆˆˆˆˆˆˆˆˆˆˆ³
³³³³³ˆ••••ÿøÿÿÿÿûûûûûûxn•••³ˆ³ˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆ
³³³³•³••inxÿøøêøøøøøÿÿûxi•••³³ˆ³ˆˆˆ³ˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆ
³³•³³iitxÿûwûøæêøûwwxxwxii•³³ˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆ ˆˆ
ˆ³³³tntnûÿøøûêêêêøÿøøêøwiwn³ˆˆˆˆˆˆˆˆˆˆˆˆˆ³ˆˆˆˆˆˆˆˆˆ
³ˆ³nniwÿÿÿÿêêêêêêøwwÿÿøÿnxxiˆˆˆ³³ˆˆ³ˆˆˆˆ³³³ˆˆˆˆˆˆˆˆ
•tûtnxêææææææêæææêøøøÿøxxÿÿn³ˆ³³³³ˆˆˆˆˆˆˆˆˆˆˆ³³³ˆˆˆ
xÿ•iiûæææûÿêêæææææêêêêêøxøÿw³³³³³³ˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆˆ
øtti•ÿæÆæêøêÆÆêæÆæêÆÆÆæêxûût³³³•³³ˆ³ˆˆˆˆ ˆˆˆ³i•³³³ˆ
xt•••xÆæêêæÆÆÆÆÆÆÆææÆÆæøûxt•••ii••••³³ˆ³•³ˆˆˆˆ•ˆ   
tttiinæÆÿûøøøøøêææÆæÆæêêêtiiitnnnnnt•³³³³•³ˆ³ˆˆˆˆ ˆ
i³••••ûæêêÆÆÆÆÆÆÆÆÆÆæææêxiiiinûÿûxûûxti•³³³³•³ˆˆˆˆˆ
•nt•³³•ÿêæÆÆÆÆÆÆÆÆÆÆææêûi•••tûøêæêêêêêÿt••i•³ˆˆˆˆˆˆ
tnt•³ˆˆ•øæÆÆÆÆÆÆÆÆÆÆÆæÿi•••inwxxxêæÆÆÿûûxxxiˆˆ³ˆˆˆˆ
nnnt³³³ˆiÿêæÆÆÆÆÆÆææêûi³••tøæêêÆøxæÆÆæÿÿÿûw•ˆˆ³³ˆˆˆ
nwwnt³••³³³nxûûÿÿøêææx•³³•wøÿÿøønxêææêÿûxnti•tt³³³ˆ
wwnnnttitt•txøêêæÆÆÆêwi³ˆiûêææêûwÿêæÆÆÆææêøêøûxii³³
nnnnnnnitxÆxÿøêæÆÆÆÆxt•ˆˆ•ûæÆÆênxÿÆÆÆÆÆêÆÆÆÆÆæøni•³
•tnwnnttwÆÆæêêæÆÆÆÆên•³ˆˆ³ûæÆÆêøÿøæÆÆÆÆÆÆÆÆÆÆÆêû•³³
•twnnnnwæÆÆÆÆæêøûwnni•³ˆ³ixæÆêxxÿêêæÆÆæææêÆÆÆææÿi³³
•tntnttûÆÆæøwnnnnnnt³ˆ³³i³nøÆæwxæÆÆÆÆÆÆøÆæÆÆÆêût³³•
•ittttxøntttnnnnntttiii³³•³xêÆûûÿøøêÆÆÆÆÆÆÆÆø•³•³³•
••ti••wntiiittnnntiittiii••³tûøøæÆÆÆÆÆÆÆÆÆæn³ˆ³•iii
³ˆˆˆˆittxtiti••tnnnnnnnnntti••nÿæÆÆÆÆÆÆÆæw•³³³•••tn
•³³itttttttnnnnnnnnnnnnnnwwwntiwxøææÆêxi•³³³•inwntn
³³ˆ•tttttttttnnnnnnnnwwwwwwtii•nxxûxnti³•••tnnttnnn
ˆˆˆ³tttttttttnnnnnnnwwwwwtiii••innnnni•titniittttii
ˆˆˆ³tttttttnnnnnnnnnnnniiii••••itwwntiii••iiiinwwww
ˆˆˆ³ttttttttnnnnnnnti••••³³³³••itttiiiiiitnwwwwwwww
ˆˆˆ³ttnnntnttnnnnti³³³ˆ³•••••••iitti•tnwwnnwwwwwwww
        */  

  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <script>
      
    const styleSets = [
      {
        backgroundImage: 'bg1.webp', //Deforestation at NovoProgreso, Parà state, Brazilian Amazon - Coordenecao-Geral de Obsevacao da Terra, INPE 
        invaderImage1: 'invader1.png',
        invaderImage2: 'invader1a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(44, 244, 96, 0.5)',
        gunPattern: [ //Gosper Glider Gun
        [1, 5], [1, 6], [2, 5], [2, 6], [11, 5], [11, 6], [11, 7],
        [12, 4], [12, 8], [13, 3], [13, 9], [14, 3], [14, 9], [15, 6],
        [16, 4], [16, 8], [17, 5], [17, 6], [17, 7], [18, 6], [21, 3],
        [21, 4], [21, 5], [22, 3], [22, 4], [22, 5], [23, 2], [23, 6],
        [25, 1], [25, 2], [25, 6], [25, 7], [35, 3], [35, 4], [36, 3],
        [36, 4]
      ]
      },
      {
        backgroundImage: 'bg2.webp', //Lithium Mine at Bolivia's Uyuni Salt Flat - Coordenecao-Geral de Obsevacao da Terra, INPE
        invaderImage1: 'invader2.png',
        invaderImage2: 'invader2a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(201, 244, 251, 0.5)',
        gunPattern: [ // Bi Gun
        [5, 21], [5, 22], [6, 21], [6, 22], 
        [14, 15], [14, 21], [15, 14], [15, 15], [15, 16], [15, 20], [15, 21], [15, 22], [16, 13], [16, 14], [16, 16], [16, 20], [16, 22], [16, 23], [19, 16], [19, 20], [20, 16], [20, 20],
        [39, 20], [39, 24], [40, 20], [40, 24], [43, 17], [43, 18], [43, 20], [43, 24], [43, 26], [43, 27], [44, 18], [44, 19], [44, 20], [44, 24], [44, 25], [44, 26], [45, 19], [45, 25],
        [53, 18], [53, 19], [54, 18], [54, 19]
      ]
      },
      {
        backgroundImage: 'bg3.webp', //Morganza Floodway after five days of flow - NASA Goddard Space Flight Center (modified)
        invaderImage1: 'invader3.png',
        invaderImage2: 'invader3a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(2, 104, 115, 0.5)',
        gunPattern: [ // Simkin Glider Gun
        [23, 30], [23, 31], [23, 37], [23, 38], [24, 30], [24, 31], [24, 37], [24, 38], [26, 33], [26, 34], [27, 33], [27, 34],
        [32, 12], [32, 16], [33, 11], [33, 12], [33, 17], [34, 6], [34, 7], [34, 10], [34, 11], [34, 17], [34, 18], [35, 6], [35, 7], [35, 11], [35, 16], [35, 17], [36, 16]
      ]
      },
      {
        backgroundImage: 'bg4.webp', //Roiling Flows on Holuhran Lava Field - NASA Goddard Space Flight Center
        invaderImage1: 'invader4.png',
        invaderImage2: 'invader4a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(39, 242, 222, 0.5)',
        gunPattern: [ // Period 156 Gun
        [9, 21], [9, 22], [10, 21], [10, 22], [15, 23], [15, 24], [16, 23], [17, 23], [18, 24],
        [27, 33], [27, 36], [28, 34], [28, 35], [28, 36], [29, 1], [29, 2], [29, 41], [29, 42], [30, 1], [30, 2], [30, 41], [30, 42], [31, 7], [31, 8], [31, 9], [32, 7], [32, 10],
        [41, 19], [42, 20], [43, 20], [44, 19], [44, 20], [49, 21], [49, 22], [50, 21], [50, 22]
      ]
      },
        {
        backgroundImage: 'bg5.webp', //Cultivating Egypt's Desert - NASA Goddard Space Flight Center
        invaderImage1: 'invader5.png',
        invaderImage2: 'invader5a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(242, 218, 189, 0.5)',
        gunPattern: [ // AK 94
        [11, 24], [11, 25], [11, 29], [12, 25], [12, 28], [12, 30], [13, 23], [13, 28], [13, 30], [14, 23], [14, 24], [14, 25], [14, 26], [14, 27], [14, 29], [15, 27], [16, 16], [16, 17], [16, 23], [16, 24], [16, 28], [17, 17], [17, 23], [17, 24], [17, 29], [18, 17], [18, 19], [18, 28], [18, 29], [19, 18], [19, 19],
        [24, 32], [24, 33], [25, 32], [25, 33], [26, 9], [26, 10], [27, 10], [28, 10], [28, 12], [29, 11], [29, 12], [29, 16], [29, 17], [30, 15], [30, 18], [30, 30], [30, 31], [31, 16], [31, 18], [31, 30], [31, 32], [32, 16], [32, 17], [32, 18], [32, 32], [33, 32], [33, 33], [34, 9], [34, 10], [35, 9], [35, 10], [35, 19], [36, 20], [37, 18], [37, 20], [38, 19],
        [40, 23], [40, 24], [41, 13], [41, 14], [41, 23], [41, 25], [42, 13], [42, 18], [42, 19], [42, 25], [43, 14], [43, 18], [43, 19], [43, 25], [43, 26], [44, 15], [45, 13], [45, 15], [45, 16], [45, 17], [45, 18], [45, 19], [46, 12], [46, 14], [46, 19], [47, 12], [47, 14], [47, 17], [48, 13], [48, 17], [48, 18]
        ]
      },
    {
        backgroundImage: 'bg6.webp', //Lop Nur, Xinjiang, China - NASA Goddard Space Flight Center (modified)
        invaderImage1: 'invader6.png',
        invaderImage2: 'invader6a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(140, 107, 79, 0.5)',
        gunPattern: [ // New Gun
        [1, 25], [1, 26], [1, 32], [1, 33], [2,25], [2, 26], [2, 32], [2, 33], [10, 25], [10, 26], [10, 27], [10, 31], [10, 32], [10, 33], [11, 24], [11, 27], [11, 31], [11, 34], [12, 24], [12, 25], [12, 27], [12, 31], [12, 33], [12, 34],
        [25, 12], [26, 1], [26, 2], [26, 11], [26, 12], [27, 1], [27, 2], [27, 10], [27, 11], [28, 11], [28, 12], [28, 15], [28, 16], [28, 32], [28, 33], [29, 32], [29, 33], [32, 11], [32, 12], [32, 15], [32, 16], [33, 1], [33, 2], [33, 10], [33, 11], [34, 1], [34, 2], [34, 11], [34, 12], [35, 12]
      ]
      },
        {
        backgroundImage: 'bg7.webp', // Large flood in Russia - Coordenecao-Geral de Obsevacao da Terra, INPE
        invaderImage1: 'invader7.png',
        invaderImage2: 'invader7a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(242, 61, 127, 0.5)',
        gunPattern: [ // P58 Pi-heptomino Hassler
        [19, 30], [19, 31], [20, 17], [20, 18], [20, 19], [20, 30], [20, 31], [21, 16], [21, 20], [22, 16], [22, 17], [22, 19], [22, 20], [23, 9], [23, 10], [24, 8], [24, 10], [25, 8], [26, 7], [26, 8],
        [28, 33], [29, 12], [29, 13], [29, 31], [29, 32], [29, 33], [30, 13], [30, 30], [31, 10], [31, 11], [31, 12], [31, 30], [31, 31], [32, 10],
        [34, 35], [34, 36], [35, 35], [36, 33], [36, 35], [37, 33], [37, 34], [38, 23], [38, 24], [38, 26], [38, 27], [39, 23], [39, 27], [40, 12], [40, 13], [40, 24], [40, 25], [40, 26], [41, 12], [41, 13]
      ]
      },
        {
        backgroundImage: 'bg8.webp', // Blooms in the Sea of Marmara - NASA Goddard Space Flight Center
        invaderImage1: 'invader8.png',
        invaderImage2: 'invader8a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(48, 84, 115, 0.5)',
        gunPattern: [ // B-52 Bomber
        [10, 16], [10, 17], [10, 20], [10, 26], [10, 27], [11, 12], [11, 13], [11, 16], [11, 17], [11, 21], [11, 25], [11, 28], [12, 12], [12, 13], [12, 21], [12, 25], [12, 27], [12, 30], [13, 17], [13, 18], [13, 19], [13, 20], [13, 26], [14, 27], [14, 28], [14, 30], [15, 29], [19, 16], [19, 17], [20, 16], [20, 17],
        [27, 30], [28, 29], [28, 31], [29, 14], [29, 30], [30, 13], [30, 15], [31, 14], [31, 20], [31, 21], [31, 22], [32, 20], [32, 22], [33, 22], [37, 18], [37, 19], [38, 19], [38, 20], [38, 27], [38, 28], [39, 27], [39, 28],
        [43, 15], [44, 14], [44, 16], [44, 17], [45, 18], [45, 27], [45, 28], [45, 31], [46, 14], [46, 17], [46, 19], [46, 23], [46, 24], [46, 27], [46, 28], [46, 32], [47, 16], [47, 19], [47, 23], [47, 24], [47, 32], [48, 17], [48, 18], [48, 28], [48, 29], [48, 30], [48, 31]
      ]
      },
        {
        backgroundImage: 'bg9.webp', //Lena Delta - NASA Goddard Space Flight Center
        invaderImage1: 'invader9.png',
        invaderImage2: 'invader9a.png',
        liveCellColor: 'black',
        deadCellColor: 'rgba(197, 100, 94, 0.5)',
        gunPattern: [ // P24 Gliderless LWSS Gun
        [1, 6], [1, 7], [1, 9], [1, 10], [1, 21], [2, 7], [2, 9], [2, 11], [2, 15], [2, 16], [2, 20], [2, 22], [3, 5], [3, 11], [3, 14], [3, 17], [3, 20], [3, 21], [4, 5], [4, 6], [4, 9], [4, 11], [4, 13], [4, 15], [4, 17], [5, 8], [5, 9], [5, 10], [5, 11], [5, 13], [5, 16], [5, 20], [5, 21], [6, 5], [6, 6], [6, 9], [6, 12], [6, 13], [6, 16], [6, 17], [6, 18], [6, 20], [6, 22], [7, 6], [7, 8], [7, 9], [7, 12], [7, 13], [7, 14], [7, 18], [7, 19], [7, 22], [8, 6], [8, 8], [8, 18], [8, 19], [8, 20], [8, 22], [8, 23], [9, 5], [9, 6], [9, 9], [9, 22], [10, 8], [10, 9], [10, 16], [10, 19], [10, 20], [10, 22], [11, 12], [11, 13], [11, 16], [11, 17], [11, 19], [11, 20], [11, 22], [11, 24], [11, 25], [12, 12], [12, 16], [12, 17], [12, 23], [13, 13], [13, 14], [13, 15], [13, 18], [14, 18], [15, 18], [15, 19], [15, 20], [15, 21], [15, 22], [16, 19], [16, 20], [16, 21],
        [15, 13], [15, 14], [16, 13], [17, 11], [17, 12], [17, 15], [18, 10], [18, 13], [18, 14], [18, 15], [19, 11], [19, 12], [20, 8], [20, 9], [20, 10], [20, 13], [21, 8], [21, 12], [21, 16], [21, 17], [21, 18], [22, 10], [22, 11], [22, 12], [22, 16], [22, 17], [22, 19], [22, 23], [22, 24], [22, 25], [23, 12], [23, 20], [23, 21], [23, 23], [24, 9], [24, 10], [24, 11], [24, 20], [24, 21], [25, 4], [25, 5], [25, 8], [25, 9], [25, 10], [25, 11], [25, 21], [26, 4], [26, 9], [27, 5], [27, 6], [27, 7], [27, 8], [29, 5], [29, 6], [29, 15], [29, 17], [29, 20], [30, 4], [30, 6], [30, 7], [30, 15], [30, 16], [30, 17], [30, 19], [30, 21], [30, 22], [31, 4], [31, 6], [31, 8], [31, 14], [31, 21], [32, 5], [32, 6], [32, 8], [32, 15], [32, 21], [32, 22], [33, 7], [34, 7], [34, 9], [34, 14], [34, 15], [34, 21], [35, 8], [35, 9], [35, 15], [35, 22], [36, 14], [36, 15], [36, 17], [36, 19], [36, 20], [36, 21], [37, 16], [37, 19], [37, 21],
        [6, 35], [6, 28], [7, 41], [7, 40], [7, 35], [7, 34], [7, 33], [7, 28], [7, 26], [8, 42], [8, 40], [8, 32], [8, 29], [8, 27], [9, 42], [9, 40], [9, 38], [9, 37], [9, 33], [9, 32], [9, 27], [10, 41], [10, 39], [10, 37], [11, 39], [12, 41], [12, 38], [12, 34], [12, 27], [13, 38], [13, 35], [13, 33], [13, 32], [13, 30], [14, 42], [14, 38], [14, 31], [14, 29], [15, 42], [15, 38], [15, 30], [15, 25], [16, 38], [16, 34], [16, 33], [16, 27], [16, 26], [17, 41], [17, 38], [17, 32], [17, 28], [18, 39], [18, 32], [18, 28], [19, 41], [19, 39], [19, 37], [19, 31], [19, 30], [19, 29], [20, 42], [20, 40], [20, 38], [20, 37], [21, 42], [21, 40], [22, 41], [22, 40]
      ]
      },
    ];
      
    function getRandomSet(array) {
      return array[Math.floor(Math.random() * array.length)];
    }
    const selectedSet = getRandomSet(styleSets);
      
    document.body.style.backgroundImage = `url(${selectedSet.backgroundImage})`;

    const canvas = document.getElementById('gameCanvas');
    canvas.style.backgroundSize = 'cover' ;

    const ctx = canvas.getContext('2d');
    const cellSize = 2; 
    const rows = 45; 
    const cols = 60;
    canvas.width = cols * cellSize;
    canvas.height = rows * cellSize;
      
    const backgroundImage = new Image();
    backgroundImage.src = selectedSet.backgroundImage;  
      
    const invaderImage1 = new Image();
    invaderImage1.src = selectedSet.invaderImage1;
    const invaderImage2 = new Image();
    invaderImage2.src = selectedSet.invaderImage2;

    const liveCellColor = selectedSet.liveCellColor;
    const deadCellColor = selectedSet.deadCellColor;
      
    let invader = {
      x: cols - 6,
      y: 0,
      dir: -1,
      verticalDir: 1, 
      width: 5, 
      height: 4, 
    };
      
    let currentInvaderImage = 0;

    let grid = createGrid(rows, cols);
    addGosperGliderGun(grid);

    function createGrid(rows, cols) {
      return new Array(rows).fill(null).map(() =>
        new Array(cols).fill(0)
      );
    }

    function drawGrid(grid) {
         ctx.clearRect(0, 0, canvas.width, canvas.height);
        
      for (let row = 0; row < rows; row++) {
        for (let col = 0; col < cols; col++) {
        ctx.fillStyle = grid[row][col] === 1 ? liveCellColor : deadCellColor;
            
          ctx.beginPath();
          ctx.rect(col * cellSize, row * cellSize, cellSize, cellSize);
        
            
        
          // Dtaw the gol cells
          ctx.fillStyle = grid[row][col] === 1 ? liveCellColor : deadCellColor;
          ctx.fill();
          ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)'; // Transparent color
      ctx.lineWidth = 2; // Adjust as needed for a larger gap
          ctx.stroke();
          
        };
      }
        
      // Alternate between the two images based on the `currentInvaderImage` flag
      const invaderImage = currentInvaderImage === 0 ? invaderImage1 : invaderImage2;
      // Draw the Space Invader (replacing the red rectangle with an image)
      if (invaderImage.complete) { 
        ctx.drawImage(invaderImage, invader.x * cellSize, invader.y * cellSize, invader.width * cellSize, invader.height * cellSize);
      }
    }

    function countNeighbors(grid, x, y) {
      let total = 0;
      for (let i = -1; i <= 1; i++) {
        for (let j = -1; j <= 1; j++) {
          if (i === 0 && j === 0) continue;

          const row = x + i;
          const col = y + j;

          // Check boundaries
          if (row >= 0 && row < rows && col >= 0 && col < cols) {
            total += grid[row][col];
          }
        }
      }
      return total;
    }

    function updateGrid(grid) {
      const newGrid = grid.map(arr => [...arr]);
      for (let row = 0; row < rows; row++) {
        for (let col = 0; col < cols; col++) {
          const neighbors = countNeighbors(grid, row, col);
          if (grid[row][col] === 1) {
            if (neighbors < 2 || neighbors > 3) {
              newGrid[row][col] = 0;
            }
          } else {
            if (neighbors === 3) {
              newGrid[row][col] = 1;
            }
          }
        }
      }
      return newGrid;
    }

    function updateInvader() {
      let newX = invader.x + invader.dir;

      const hitsLeftEdge = newX < 0;
      const hitsRightEdge = newX + invader.width > cols;

      let hitsLiveCell = false;
      for (let i = 0; i < invader.width; i++) {
        const checkX = newX + i;
        if (grid[invader.y][checkX] === 1) {
          hitsLiveCell = true;
          break;
        }
      }

      if (hitsLeftEdge || hitsRightEdge || hitsLiveCell) {
        invader.dir *= -1;
        invader.y += invader.verticalDir;
      } else {
        invader.x = newX; 
      }

      if (invader.y >= rows - 1) {
        invader.verticalDir = -1;
      } else if (invader.y <= 0) {
        invader.verticalDir = 1; 
      }
      currentInvaderImage = currentInvaderImage === 0 ? 1 : 0;
    }

    function addGosperGliderGun(grid) {
  const gun = selectedSet.gunPattern; 
  gun.forEach(([x, y]) => {
    grid[y][x] = 1;
  });
}

const gridUpdateInterval = 200; 
const invaderUpdateInterval = 200; 

let lastGridUpdate = 0;
let lastInvaderUpdate = 0;

function gameLoop(timestamp) {
  if (timestamp - lastGridUpdate > gridUpdateInterval) {
    grid = updateGrid(grid); 
    lastGridUpdate = timestamp; 
  }

  if (timestamp - lastInvaderUpdate > invaderUpdateInterval) {
    updateInvader();
    lastInvaderUpdate = timestamp; 
  }

  drawGrid(grid); 
  requestAnimationFrame(gameLoop); 
}

  let imagesLoaded = 0;
    invaderImage1.onload = invaderImage2.onload = () => {
      imagesLoaded++;
      if (imagesLoaded === 2) {
        requestAnimationFrame(gameLoop);
      }
    };
  </script>
</body>
</html>


